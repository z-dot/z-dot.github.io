(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{287:function(t,e,n){"use strict";n.r(e);var r=n(291),o=n.n(r),c=n(292),l=n.n(c),d=n(293),v=n.n(d),f={data:function(){return{value:null}},methods:{startEditor:function(data){this.$store.commit("modify_editor",new o.a({holder:"editorjs",tools:{list:v.a,header:{class:l.a,config:{placeholder:"Header",levels:[2,3,4],defaultLevel:2}}},autofocus:!0,placeholder:"Write here!",data:data}))},save:function(){return window.editor.save()}}},h=n(65),component=Object(h.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"editorjs mx-auto",attrs:{id:"editorjs"}})}),[],!1,null,"e1f44db6",null);e.default=component.exports},302:function(t,e,n){"use strict";n.r(e);n(77),n(18),n(22),n(31),n(36),n(56);var r=n(15),o=n(296),c=n(297),l=n(299);function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={data:function(){return{advice:!0,save_state:"Unsaved",check_saved_interval:void 0,saving_interval:void 0}},methods:{toggleAdvice:function(){this.advice=!this.advice},saveQuestion:function(){var t=this;this.$store.state.editor.save().then((function(data){t.$store.commit("change_richtext_and_datetime",{id:t.current_question.id,rich_text:data.blocks,new_date:new Date(data.time).toDateString(),raw:data}),localStorage.setItem(t.$store.state.current_question.question_data.question,JSON.stringify(data))})),this.save_state="Saved"},is_saved:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.state.editor.save();case 2:n=e.sent,JSON.stringify(t.$store.state.current_question.user_data.rich_text)===JSON.stringify(n.blocks)?t.save_state="Saved":t.save_state="Unsaved";case 4:case"end":return e.stop()}}),e)})))()},check_is_saved:function(){var t=this,e=this;this.$store.commit("set_checking_interval",setInterval((function(){t.$store.state.editor&&e.is_saved(e)}),5e3))},save_periodically:function(){var t=this,e=this;this.$store.commit("set_saving_interval",setInterval((function(){t.$store.state.editor&&e.saveQuestion()}),3e4))},download_as_docx:function(){var t=this;this.$store.state.editor.save().then((function(data){function e(t){switch(t){case 2:return o.HeadingLevel.HEADING_3;case 3:return o.HeadingLevel.HEADING_4;case 4:return o.HeadingLevel.HEADING_5}}function n(text){text=c.decode(text);var i,output=[],t="",e=[];for(i=0;i<text.length;i++)"<i>"===(t+=text[i]).slice(-3)?(t.slice(0,-3).length>0&&output.push(new o.TextRun({text:t.slice(0,-3),bold:e.includes("b"),italics:e.includes("i")})),e.push("i"),t=""):"<b>"===t.slice(-3)?(t.slice(0,-3).length>0&&output.push(new o.TextRun({text:t.slice(0,-3),bold:e.includes("b"),italics:e.includes("i")})),e.push("b"),t=""):"</b>"===t.slice(-4)||"</i>"===t.slice(-4)?(t.slice(0,-4).length>0&&output.push(new o.TextRun({text:t.slice(0,-4),bold:e.includes("b"),italics:e.includes("i")})),e.pop(),t=""):"<br>"===t.slice(-4)&&(t=t.slice(0,-4));return t.length>0&&output.push(new o.TextRun({text:t,bold:e.includes("b"),italics:e.includes("i")})),output}var r=new o.Document({numbering:{config:[{reference:"my-numbering",levels:[{level:0,format:"decimal",text:"%1)",alignment:o.AlignmentType.START,style:{paragraph:{indent:{left:720,hanging:260}}}}]}]}});r.addSection({properties:{},children:function(t,header){var r,output=[];new o.Numbering({config:[{reference:"my-numbering",levels:[{level:0,format:"decimal",text:"%1)",alignment:o.AlignmentType.START,style:{paragraph:{indent:{left:720,hanging:260}}}}]}]}),output.push(new o.Paragraph({text:header,heading:o.HeadingLevel.HEADING_2}));var c,l=d(t.blocks);try{for(l.s();!(c=l.n()).done;)switch((r=c.value).type){case"header":output.push(new o.Paragraph({children:n(r.data.text),heading:e(r.data.level)}));break;case"list":if("unordered"===r.data.style){var v,f=d(r.data.items);try{for(f.s();!(v=f.n()).done;)item=v.value,output.push(new o.Paragraph({children:n(item),bullet:{level:0}}))}catch(t){f.e(t)}finally{f.f()}}else{temp=void 0;var h,_=d(r.data.items);try{for(_.s();!(h=_.n()).done;)item=h.value,temp=new o.Paragraph({children:n(item),numbering:{reference:"my-numbering",level:0}}),output.push(temp)}catch(t){_.e(t)}finally{_.f()}}break;default:output.push(new o.Paragraph({children:n(r.data.text)}))}}catch(t){l.e(t)}finally{l.f()}return output}(data,t.$store.state.current_question.question_data.question)}),o.Packer.toBlob(r).then((function(e){return Object(l.saveAs)(e,t.$store.state.current_question.question_data.question+".docx")}))}))}},computed:{current_question:function(){return this.$store.state.current_question},general_advice:function(){return this.$store.state.general_advice}},mounted:function(){var t;this.$store.dispatch("get_user_questions");var e,n=d(this.$store.state.user_questions);try{for(n.s();!(e=n.n()).done;)if((t=e.value).id.toString()===this.$route.path.slice(1)){this.$store.commit("modify_current_question",t),this.$refs.editor.startEditor(this.$store.state.current_question.raw_user_data);break}}catch(t){n.e(t)}finally{n.f()}this.check_is_saved(),this.save_periodically()}},h=n(65),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{staticClass:"mb-3",attrs:{sticky:"",variant:"info",type:"dark"}},[n("NuxtLink",{attrs:{tag:"b-navbar-brand",to:"/",href:"#"}},[t._v("Philosophy Helper")]),t._v(" "),n("b-navbar-nav",{staticClass:"mx-auto"},[n("b-nav-text",[t._v(t._s(t.save_state))])],1),t._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"}),t._v(" "),n("b-button",{staticClass:"ml-2 btn-light",attrs:{size:"sm"},on:{click:function(e){return t.toggleAdvice()}}},[t._v(t._s(t.advice?"Close advice":"Open advice"))]),n("b-button",{staticClass:"ml-2 btn-light",attrs:{size:"sm"},on:{click:function(e){return t.download_as_docx()}}},[t._v("Save as .docx")]),n("b-button",{staticClass:"ml-2 btn-info",attrs:{size:"sm"}},[t._v("Give feedback")]),n("b-button",{staticClass:"ml-2 btn-primary",attrs:{size:"sm"},on:{click:function(e){return t.saveQuestion()}}},[t._v("Save")])],1),t._v(" "),n("b-container",{attrs:{fluid:""}},[n("b-row",[t.advice?n("b-col",{attrs:{cols:"4"}},[n("b-card",{attrs:{"no-body":""}},[n("b-tabs",{attrs:{pills:"",card:""}},[n("b-tab",{attrs:{title:"Question advice"}},[t._v("\n              "+t._s(t.current_question.question_data.advice)+"\n            ")]),t._v(" "),n("b-tab",{attrs:{title:"General advice"}},[n("div",{domProps:{innerHTML:t._s(t.general_advice)}})])],1)],1)],1):t._e(),t._v(" "),n("b-col",[n("b-container",[n("h2",{staticClass:"text-center"},[t._v("\n            "+t._s(t.current_question.question_data.question)+"\n          ")]),t._v(" "),n("Editor",{ref:"editor"})],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Editor:n(287).default})}}]);